# ═══════════════════════════════════════════════════════════════════════════
# MCP Swarm Server - Cloudflare Worker
# ═══════════════════════════════════════════════════════════════════════════
#
# ИНСТРУКЦИЯ ПО ДЕПЛОЮ:
# 1. Сначала задеплойте Hub (cloudflare/hub)
# 2. Скопируйте URL вашего Hub и вставьте ниже в HUB_URL
# 3. npx wrangler login
# 4. npx wrangler deploy
# 5. Ваш MCP Server будет доступен по адресу:
#    https://mcp-swarm-server.YOUR-SUBDOMAIN.workers.dev/mcp
#
# ═══════════════════════════════════════════════════════════════════════════

name = "mcp-swarm-server"
main = "src/index.ts"
compatibility_date = "2025-12-01"

# Durable Objects для persistent state
[durable_objects]
bindings = [
  { name = "MCP_SESSION", class_name = "McpSession" }
]

[[migrations]]
tag = "v1"
new_classes = ["McpSession"]

# ═══════════════════════════════════════════════════════════════════════════
# НАСТРОЙКИ - ЗАМЕНИТЕ НА СВОИ!
# ═══════════════════════════════════════════════════════════════════════════
[vars]
# URL вашего Hub (задеплойте сначала cloudflare/hub)
HUB_URL = "wss://mcp-swarm-hub.YOUR-SUBDOMAIN.workers.dev/ws"

# ═══════════════════════════════════════════════════════════════════════════
# СЕКРЕТЫ (добавляются через CLI, НЕ здесь!)
# ═══════════════════════════════════════════════════════════════════════════
# npx wrangler secret put TELEGRAM_BOT_TOKEN
# npx wrangler secret put TELEGRAM_CHAT_ID
# ═══════════════════════════════════════════════════════════════════════════
